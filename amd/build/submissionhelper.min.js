define(["jquery","core/log","assignsubmission_cloudpoodll/cloudpoodllloader"],function(a,b,c){"use strict";return b.debug("submission helper: initialising"),{uploadstate:!1,init:function(a){this.component=a.component,this.register_controls(),this.register_events(),this.setup_recorder()},setup_recorder:function(){var a=this,b=function(b){switch(b.type){case"recording":"started"===b.action&&a.controls.updatecontrol.val();break;case"awaitingprocessing":"posted"!=a.uploadstate&&a.controls.updatecontrol.val(b.mediaurl),a.uploadstate="posted"}};c.init(this.component+"_therecorder",b)},register_controls:function(){this.controls={},this.controls.deletebutton=a("."+this.component+"_deletesubmissionbutton"),this.controls.updatecontrol=a("#"+this.component+"_updatecontrol"),this.controls.currentcontainer=a("."+this.component+"_currentsubmission")},register_events:function(){var a=this;this.controls.deletebutton.click(function(){a.controls.updatecontrol&&confirm(M.util.get_string("reallydeletesubmission",a.component))&&(a.controls.updatecontrol.val(-1),a.controls.currentcontainer.html(""))})}}});